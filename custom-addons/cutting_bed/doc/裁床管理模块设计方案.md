裁床管理模块设计方案
========================================================================================================

本厂有一台拓卡奔马的裁床（D8002S 型号），生产时会将相关数据发回裁床厂家。这些数据可以在拓卡奔马的官网查看。

当前的实现
--------------------------------------------------------------------------------------------

基于此，可用程序访问奔马官网的相关 URL 来获取裁床的生产数据。

相关 URL：

- 拓卡奔马的官网：https://bullmer.online/
- 登录此网的 AJAX URL: https://bullmer.online/Ajax/Ajax_Login.ashx
- 获取裁床生产数据的 AJAX URL: https://bullmer.online/Ajax/Ajax_CutterStatistic.ashx

实现方案：

1. 用 Python reqeusts 库创建 HTTP 会话 (session)，因为需要一前一后两个关联的 HTTP 请求
2. 先以 POST 方式访问奔马的登录 URL
3. 再以 POST 方式访问获取裁床生产数据的 URL，查询参数指定生产日期等，**但是必须将查询参数放在 POST 体中**
4. 取到响应数据后，做适当的格式处理后，存到 Odoo 系统中。
5. 以上实现为 Odoo Model `CuttingBedProductionRecord` 的一个方法，具体见 `models/cutting_bed_production_record.py`。
6. Odoo 系统中设置“自动化 安排的动作”：“同步裁床当日生产数据”


另一可能的方案
--------------------------------------------------------------------------------------------

拓卡奔马可以提供与裁床配套的工控机（为触屏小电脑），其上装有生产数据采集软件，可实时采集裁剪数据（裁剪一结束就有数据），保存到工控机上的 MySQL 数据库。


